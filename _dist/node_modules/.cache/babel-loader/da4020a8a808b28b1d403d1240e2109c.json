{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport Analytics from \"@aws-amplify/analytics\";\nimport { ConsoleLogger as Logger } from \"@aws-amplify/core\";\nimport { DeviceInfos } from \"./DeviceInfos\";\nvar logger = new Logger(\"PinPoint\");\nexport function sendEvent(_x, _x2, _x3, _x4) {\n  return _sendEvent.apply(this, arguments);\n}\n\nfunction _sendEvent() {\n  _sendEvent = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(eventName, params, context, args) {\n    var generated, values;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return endpointGenerated();\n\n          case 3:\n            generated = _context.sent;\n            values = getParamsByContext(eventName, params, context, args);\n            Analytics.record({\n              name: eventName.toString(),\n              attributes: _objectSpread({}, values, generated),\n              immediate: true\n            });\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            console.error(_context.t0);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n  return _sendEvent.apply(this, arguments);\n}\n\nexport var ZB_EVENT_TYPE = {\n  ZB_APP_INSTALL: \"ZB_APP_INSTALL\",\n  ONEROOM_FILTER_RESULTS: \"ONEROOM_FILTER_RESULTS\",\n  VILLA_FILTER_RESULTS: \"VILLA_FILTER_RESULTS\",\n  OFFICETEL_FILTER_RESULTS: \"OFFICETEL_FILTER_RESULTS\",\n  APART_FILTER_RESULTS: \"APART_FILTER_RESULTS\",\n  ZB_SCREEN_MAP_CLICK: \"ZB_SCREEN_MAP_CLICK\",\n  ZB_GNB_CLICK: \"ZB_GNB_CLICK\",\n  SIGN_UP: \"SIGN_UP\",\n  ZB_SCREEN_CLICK: \"ZB_SCREEN_CLICK\",\n  ZB_SCREEN_VIEW: \"ZB_SCREEN_VIEW\",\n  VIEW_ITEM: \"VIEW_ITEM\",\n  ECOMMERCE_PURCHASE: \"ECOMMERCE_PURCHASE\",\n  ADD_TO_WISHLIST: \"ADD_TO_WISHLIST\",\n  ZB_AD_CLICK: \"ZB_AD_CLICK\",\n  ZB_AD_IMPRESSION: \"ZB_AD_IMPRESSION\",\n  VIEW_SEARCH_RESULTS: \"VIEW_SEARCH_RESULTS\",\n  ZB_WAY_SEARCHING: \"ZB_WAY_SEARCHING\",\n  ZB_VR_MOVING: \"ZB_VR_MOVING\",\n  ZB_VR_LOADING: \"ZB_VR_LOADING\",\n  RN_BUNDLE_INIT: \"RN_BUNDLE_INIT\",\n  CODE_PUSH_CHECK: \"CODE_PUSH_CHECK\",\n  CODE_PUSH_START: \"CODE_PUSH_START\",\n  CODE_PUSH_END: \"CODE_PUSH_END\",\n  APART_PURCHASE: \"APART_PURCHASE\",\n  ZB_AD_PAGE_OPEN: \"ZB_AD_PAGE_OPEN\" // 핀포인트 추가\n\n};\nexport function endpointGenerated() {\n  return _endpointGenerated.apply(this, arguments);\n}\n\nfunction _endpointGenerated() {\n  _endpointGenerated = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var result, _result$, adid, uuid, userAgent, appsflyerId, deviceIP, params, sendParams;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _Promise.all([DeviceInfos.getAdIdObject(), DeviceInfos.getUserAgent(), DeviceInfos.getAppsflyerId(), DeviceInfos.getIpAddress()]);\n\n          case 2:\n            result = _context2.sent;\n            _result$ = result[0], adid = _result$.value, uuid = _result$.uuid;\n            userAgent = result[1];\n            appsflyerId = result[2];\n            deviceIP = result[3];\n            logger.log(\"adId= \", adid, \" uuid= \", uuid, \" appsflyerId= \", appsflyerId, \" userAgent= \", userAgent);\n            params = {\n              appVersion: \"\".concat(DeviceInfos.getVersion()),\n              locale: \"\".concat(DeviceInfos.getDeviceLocale()),\n              make: \"\".concat(DeviceInfos.getBrand()),\n              model: \"\".concat(DeviceInfos.getModel()),\n              modelVersion: \"\".concat(DeviceInfos.getDeviceId()),\n              platform: \"\".concat(DeviceInfos.getSystemName()),\n              platformVersion: \"\".concat(DeviceInfos.getSystemVersion()),\n              timezone: \"\".concat(DeviceInfos.getTimezone()),\n              adId: adid,\n              uuid: uuid,\n              appsflyerId: appsflyerId,\n              deviceIP: deviceIP // userAgent: userAgent\n\n            };\n            sendParams = {};\n\n            _Object$keys(params).forEach(function (key, index) {\n              var value = params[key];\n              if (!!value && value.length > 0) sendParams[key] = value;\n            });\n\n            return _context2.abrupt(\"return\", sendParams);\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _endpointGenerated.apply(this, arguments);\n}\n\nfunction getParamsByContext(eventName, params, context, args) {\n  var result = {};\n\n  _Object$keys(params).forEach(function (key) {\n    var value = getValueByContext(eventName, key, params[key], context, args);\n\n    if (value) {\n      result[key] = value;\n    }\n  });\n\n  return result;\n}\n\nfunction getValueByContext(eventName, key, value, context, args) {\n  var result = null;\n  var error = null;\n\n  if (value === null) {\n    error = new Error(\"eventName: \".concat(eventName, \", key: \").concat(key, \": null value is not allowed in sendEvent param\"));\n  }\n\n  switch (typeof value) {\n    case \"string\":\n      result = value;\n      break;\n\n    case \"number\":\n      {\n        result = \"\".concat(value);\n        break;\n      }\n\n    case \"boolean\":\n      {\n        result = \"\".concat(value);\n        break;\n      }\n\n    case \"function\":\n      if (!!context) {\n        try {\n          var funcResult = value.call(context, context, args);\n          result = getValueByContext(eventName, key, funcResult, context, args);\n        } catch (e) {\n          error = e;\n        }\n      }\n\n      break;\n\n    case \"object\":\n      {\n        error = new Error(\"\\n\\t\\t\\teventName: \".concat(eventName, \", key: \").concat(key, \", value: \").concat(_JSON$stringify(value), \": type object is not allowed in sendEvent param\"));\n        break;\n      }\n\n    case \"symbol\":\n      {\n        error = new Error(\"eventName: \".concat(eventName, \", key: \").concat(key, \", value: \").concat(value.toString(), \": type symbol is not allowed in sendEvent param\"));\n        break;\n      }\n\n    case \"undefined\":\n      {\n        error = new Error(\"eventName: \".concat(eventName, \", key: \").concat(key, \": type undefined is not allowed in sendEvent param\"));\n        break;\n      }\n  }\n\n  if (error) {\n    if (process.env.STAGE === \"prod\") {// Bugsnag.notify(error)\n    } else {\n      console.error(error);\n    }\n  }\n\n  return result;\n}","map":{"version":3,"sources":["E:\\비스톤스 자료\\theshop\\_dist\\src\\utils\\PinPoint.js"],"names":["Analytics","ConsoleLogger","Logger","DeviceInfos","logger","sendEvent","eventName","params","context","args","endpointGenerated","generated","values","getParamsByContext","record","name","toString","attributes","immediate","console","error","ZB_EVENT_TYPE","ZB_APP_INSTALL","ONEROOM_FILTER_RESULTS","VILLA_FILTER_RESULTS","OFFICETEL_FILTER_RESULTS","APART_FILTER_RESULTS","ZB_SCREEN_MAP_CLICK","ZB_GNB_CLICK","SIGN_UP","ZB_SCREEN_CLICK","ZB_SCREEN_VIEW","VIEW_ITEM","ECOMMERCE_PURCHASE","ADD_TO_WISHLIST","ZB_AD_CLICK","ZB_AD_IMPRESSION","VIEW_SEARCH_RESULTS","ZB_WAY_SEARCHING","ZB_VR_MOVING","ZB_VR_LOADING","RN_BUNDLE_INIT","CODE_PUSH_CHECK","CODE_PUSH_START","CODE_PUSH_END","APART_PURCHASE","ZB_AD_PAGE_OPEN","all","getAdIdObject","getUserAgent","getAppsflyerId","getIpAddress","result","adid","value","uuid","userAgent","appsflyerId","deviceIP","log","appVersion","getVersion","locale","getDeviceLocale","make","getBrand","model","getModel","modelVersion","getDeviceId","platform","getSystemName","platformVersion","getSystemVersion","timezone","getTimezone","adId","sendParams","forEach","key","index","length","getValueByContext","Error","funcResult","call","e","process","env","STAGE"],"mappings":"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","sourcesContent":["import Analytics from \"@aws-amplify/analytics\";\r\nimport { ConsoleLogger as Logger } from \"@aws-amplify/core\";\r\nimport { DeviceInfos } from \"./DeviceInfos\";\r\n\r\nconst logger = new Logger(\"PinPoint\");\r\n\r\nexport async function sendEvent(eventName, params, context, args) {\r\n  try {\r\n    const generated = await endpointGenerated();\r\n    const values = getParamsByContext(eventName, params, context, args);\r\n    Analytics.record({\r\n      name: eventName.toString(),\r\n      attributes: { ...values, ...generated },\r\n      immediate: true\r\n    });\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n}\r\n\r\nexport const ZB_EVENT_TYPE = {\r\n  ZB_APP_INSTALL: \"ZB_APP_INSTALL\",\r\n  ONEROOM_FILTER_RESULTS: \"ONEROOM_FILTER_RESULTS\",\r\n  VILLA_FILTER_RESULTS: \"VILLA_FILTER_RESULTS\",\r\n  OFFICETEL_FILTER_RESULTS: \"OFFICETEL_FILTER_RESULTS\",\r\n  APART_FILTER_RESULTS: \"APART_FILTER_RESULTS\",\r\n  ZB_SCREEN_MAP_CLICK: \"ZB_SCREEN_MAP_CLICK\",\r\n  ZB_GNB_CLICK: \"ZB_GNB_CLICK\",\r\n  SIGN_UP: \"SIGN_UP\",\r\n  ZB_SCREEN_CLICK: \"ZB_SCREEN_CLICK\",\r\n  ZB_SCREEN_VIEW: \"ZB_SCREEN_VIEW\",\r\n  VIEW_ITEM: \"VIEW_ITEM\",\r\n  ECOMMERCE_PURCHASE: \"ECOMMERCE_PURCHASE\",\r\n  ADD_TO_WISHLIST: \"ADD_TO_WISHLIST\",\r\n  ZB_AD_CLICK: \"ZB_AD_CLICK\",\r\n  ZB_AD_IMPRESSION: \"ZB_AD_IMPRESSION\",\r\n  VIEW_SEARCH_RESULTS: \"VIEW_SEARCH_RESULTS\",\r\n  ZB_WAY_SEARCHING: \"ZB_WAY_SEARCHING\",\r\n  ZB_VR_MOVING: \"ZB_VR_MOVING\",\r\n  ZB_VR_LOADING: \"ZB_VR_LOADING\",\r\n  RN_BUNDLE_INIT: \"RN_BUNDLE_INIT\",\r\n  CODE_PUSH_CHECK: \"CODE_PUSH_CHECK\",\r\n  CODE_PUSH_START: \"CODE_PUSH_START\",\r\n  CODE_PUSH_END: \"CODE_PUSH_END\",\r\n  APART_PURCHASE:\"APART_PURCHASE\",\r\n  ZB_AD_PAGE_OPEN: \"ZB_AD_PAGE_OPEN\"    // 핀포인트 추가\r\n};\r\n\r\nexport async function endpointGenerated() {\r\n  const result = await Promise.all([\r\n    DeviceInfos.getAdIdObject(),\r\n    DeviceInfos.getUserAgent(),\r\n    DeviceInfos.getAppsflyerId(),\r\n    DeviceInfos.getIpAddress()\r\n  ]);\r\n\r\n  const { value: adid, uuid } = result[0];\r\n  const userAgent = result[1];\r\n  const appsflyerId = result[2];\r\n  const deviceIP = result[3];\r\n\r\n  logger.log(\r\n    \"adId= \",\r\n    adid,\r\n    \" uuid= \",\r\n    uuid,\r\n    \" appsflyerId= \",\r\n    appsflyerId,\r\n    \" userAgent= \",\r\n    userAgent\r\n  );\r\n\r\n  const params = {\r\n    appVersion: `${DeviceInfos.getVersion()}`,\r\n    locale: `${DeviceInfos.getDeviceLocale()}`,\r\n    make: `${DeviceInfos.getBrand()}`,\r\n    model: `${DeviceInfos.getModel()}`,\r\n    modelVersion: `${DeviceInfos.getDeviceId()}`,\r\n    platform: `${DeviceInfos.getSystemName()}`,\r\n    platformVersion: `${DeviceInfos.getSystemVersion()}`,\r\n    timezone: `${DeviceInfos.getTimezone()}`,\r\n    adId: adid,\r\n    uuid: uuid,\r\n    appsflyerId: appsflyerId,\r\n    deviceIP: deviceIP\r\n    // userAgent: userAgent\r\n  };\r\n\r\n  const sendParams = {};\r\n\r\n  Object.keys(params).forEach((key, index) => {\r\n    const value = params[key];\r\n    if (!!value && value.length > 0) sendParams[key] = value;\r\n  });\r\n\r\n  return sendParams;\r\n}\r\n\r\nfunction getParamsByContext(eventName, params, context, args) {\r\n  const result = {};\r\n  Object.keys(params).forEach(key => {\r\n    const value = getValueByContext(eventName, key, params[key], context, args);\r\n    if (value) {\r\n      result[key] = value;\r\n    }\r\n  });\r\n  return result;\r\n}\r\n\r\nfunction getValueByContext(eventName, key, value, context, args) {\r\n  let result = null;\r\n  let error = null;\r\n\r\n  if (value === null) {\r\n    error = new Error(\r\n      `eventName: ${eventName}, key: ${key}: null value is not allowed in sendEvent param`\r\n    );\r\n  }\r\n  switch (typeof value) {\r\n    case \"string\":\r\n      result = value;\r\n      break;\r\n    case \"number\": {\r\n      result = `${value}`;\r\n      break;\r\n    }\r\n    case \"boolean\": {\r\n      result = `${value}`;\r\n      break;\r\n    }\r\n    case \"function\":\r\n      if (!!context) {\r\n        try {\r\n          const funcResult = value.call(context, context, args);\r\n          result = getValueByContext(eventName, key, funcResult, context, args);\r\n        } catch (e) {\r\n          error = e;\r\n        }\r\n      }\r\n      break;\r\n    case \"object\": {\r\n      error = new Error(`\r\n\t\t\teventName: ${eventName}, key: ${key}, value: ${JSON.stringify(\r\n        value\r\n      )}: type object is not allowed in sendEvent param`);\r\n      break;\r\n    }\r\n    case \"symbol\": {\r\n      error = new Error(\r\n        `eventName: ${eventName}, key: ${key}, value: ${value.toString()}: type symbol is not allowed in sendEvent param`\r\n      );\r\n      break;\r\n    }\r\n    case \"undefined\": {\r\n      error = new Error(\r\n        `eventName: ${eventName}, key: ${key}: type undefined is not allowed in sendEvent param`\r\n      );\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (error) {\r\n    if (process.env.STAGE === \"prod\") {\r\n      // Bugsnag.notify(error)\r\n    } else {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}